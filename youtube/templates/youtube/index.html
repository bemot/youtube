{% extends 'youtube/base.html' %}
{% load static %}
{% load pretty_duration %}
{% load endless %}
{% block content %}
{% paginate 200 videos %}
{% for video in videos %}
    {% if forloop.index|divisibleby:'6' or forloop.first %}<div class="row">{% endif %}
    <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 text-center item" title="{{ video.description }}">
        <a href="{{ video.url }}" target="_blank">
            <div class="thumbnail">
                <span class="duration">{{ video.duration|pretty_duration }}</span>
                <img class="thumbnail" src="123{{ video.get_thumbnail }}"
                     onerror='this.src = "{% static 'youtube/missing.png' %}"' />
            </div>
        </a>
        <div class="title nowrap text-left" title="{{ video.title }}">
            <small>
            {{ video.title }}
            </small>
        </div>
        <div class="text-right pull-right text-muted">
            <small class="uploaded" title="{{ video.uploaded|date:'Y-m-d H:i' }}">
            {{ video.uploaded|timesince }}
            </small>
            <br />
            <small class="viewcount">
            {% if video.view_count %}
                {{ video.view_count }}
            {% else %}
                ?
            {% endif %}
            views
            </small>
        </div>
        <div class="uploader nowrap text-left">
            <a href="{{ video.uploader.url }}" target="_blank" title="{{ video.uploader.title|default:video.uploader.author }}">
                {{ video.uploader.title|default:video.uploader.author }}
            </a>
            <br />
            <small>
            Rating:
            {% if video.rating %}
                {{ video.rating|floatformat:'1' }}
            {% else %}
                ?
            {% endif %}
            </small>
        </div>
    </div>
    {% if forloop.index|divisibleby:'6' and not forloop.first or forloop.last %}</div>{% endif %}
{% empty %}
<div class="alert alert-info">
    There are no videos to display.
</div>
{% endfor %}
{% endblock %}
